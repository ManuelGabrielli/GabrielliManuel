<!DOCTYPE html>
<html><!--
    <link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
    <script type="text/htmlpreview" src="../css/issStyle.js"></script>
    --><head><style type="text/css">
    body
    {
        margin-left:  30px;
        margin-right: 30px;
    };
    
    P
    {
        font-family: Tahoma;
        font-size: 10pt;
    };
    
    a, a:visited, a:active, a:link, a:hover {
        text-decoration: underline;
        color: #545454;
        background-color: transparent;
        font-size: 93%;
    }
    
    a:hover {
        background-color: #cccccc;
    }
    
    
    hr {
        clear: both;
        height: 1px;
        color: #242424;
        background-color: transparent;
    }
    
    h1, h2, h3 {
        color: #242424;
        clear: left;
        font: 100% Tahoma, Helvetica, Arial, sans-serif;
        margin-bottom: 0.5em;
        padding-top: 0.5em;
        border-radius: 10px;
        padding: 5px;
    }
    
    top {
        width: 100%;
    }
    
    
    #i {
        color: #ff1010;
    }
    tt{
        font-family: "Arial";
        font-size: 90%;
        color: #006600;
    }
    em{
        font-family: "Arial";
        font-size: 80%;
        font-weight: bold;
        border-style:solid;
        border-color: #abe876;
        color: #1632cc;
    }
    bc{
        font-family: "Arial";
        font-size: 90%;
        font-weight: bold;
        color: #990000;
        background-color: #fcf8c7;
    }
    ks{
        font-family: "Arial";
        font-weight: bold;
        color: #0000CD	;
        font-size: 90%;
    }
    kc{
        font-family: "Arial";
        font-weight: bold;
        color: #008000	;
        font-size: 90%;
    }
    pre{
        font-family: "Consolas";
        font-size: 85%;
        background-color: #f5f5f5;
        border: 1.5px solid silver;
        padding: 5px;
    }
    m{
        font-family: "Helvetica";
        line-height: 100%;
         font-size: 75%;
    }
    div.body{
         
        font-size: 18px;
    }
    k{
        color: #990000;
        font-weight: bold;
        font-size: 90%;
    }
    h1 {
        font-size: 150%;
        background-color: #b2c0ff;
        padding: 10px;
    }
    
    h2 {
        background-color: #9ed8ff;
        font-size: 130%;
    }
    
    h3 {
        background-color: #e6ccff;
        font-size: 100%;
    }
    h4 {
        background-color: #ccffcc;
        font-size: 100%;
        width: 95%;
        border-radius: 5px;
        padding: 2px;
    }
    h5 {
        background-color: #d5ffb0;
        font-size: 100%;
    
    }
    div.req{
        background-color: #d9ffb3;
        font-size: 18px;
        width: 700px;
        border: 3px solid green;
        padding: 15px;
        margin: 10px;
    }
    div.remark{
        background-color: #E3F2FD;
        border: 1.5px solid #d5f2ed;
        padding: 15px;
        margin: 10px;
        border-radius: 25px;
    }
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    
    ol, ul, li {
      margin: 0;
      margin-left: 10px;
      padding: 0;
      padding-bottom: 5px;
    }
    
    table, th, td {
        border: 1px solid black;
    }
    
    a, a:visited, a:active, a:link, a:hover {
        text-decoration: underline;
        color: #545454;
        background-color: transparent;
    }
    
    div.wrapdesc{
        width: 90%;
        margin: auto;
    }
    
    div.imagedesc{
        width: 85%;
        margin: auto;
    }

    </style>
        
    <base href="https://raw.githubusercontent.com/anatali/issLab2021/master/it.unibo.issLabStart/userDocs/resumableBoundaryWalker.html">
       
    <title>resumableBoundaryWalker</title></head>
        
    <body>
    <div id="top">
    <h1>Lab ISS | the project resumableBoundaryWalker<font size="5"></font> </h1>
    </div>  
    
    <div class="body"> 
    <h2>Introduction</h2>
    This case-study starts to deal with the design and development of proactive/reactive software systems which work under user-control.
     
    <h2>Requirements</h2>
    
     
    <div class="remark">
     
    Design and build a software system (named from now on 'the application') that leads the robot described in 
    <a href="https://htmlpreview.github.io/?https://github.com/anatali/issLab2021/blob/master/it.unibo.virtualRobot2020/userDocs/VirtualRobot2021.html" target="lab"><em>VirtualRobot2021.html</em></a> 
    to walk along the boundary of a empty, rectangular room under user control. 
    <br>
    More specifically, the <ks>user story</ks> can be summarized as follows:
    <br>
    <table style="width:98%">
    <tbody>	
    
    <tr>
    <td style="width:65%">
    the robot is initially located at the <ks>HOME</ks> position, as shown in the picture on the rigth
    </td>
    <td><center><img src="./img/emptyGridWithHome.png" alt="emptyGridWithHome" width="35%"></center>
    </td>
    </tr>
    
    <tr>
    <td style="width:65%">
     the application presents to the user a <ks>consoleGui</ks> similar to that shown in the picture on the rigth
    </td>
    <td><center><img src="./img/stopResumeConsole.png" alt="stopResumeConsole" width="35%"></center>
    </td>
    </tr>
    
    
    
    <tr>
    <td style="width:65%">
    when the user hits the button <k>RESUME</k> the robot <ks>starts or continue to walk</ks> along the boundary, while
    updating a <ks>robot-moves history</ks>;
    </td>
    <td> 
    </td>
    </tr>
    
    <tr>
    <td style="width:65%">
    when the user hits the button <k>STOP</k> the robot stop its journey, waiting for another <k>RESUME</k> ;
    </td>
    <td> 
    </td>
    </tr>
    
    <tr>
    <td style="width:65%">
    when the robot reachs its <ks>HOME</ks> again, the application <i>shows the robot-moves history</i> on the standard output device.
    </td>
    <td> 
    </td>
    </tr>
    
    
     </tbody>
    </table>
    
     
    </div>
    
    <h2>Requirement analysis</h2>
    Our <ks>interaction with the custom</ks> has clarified that the customer intends:
    <ul>
        <li>for <ks>room</ks>: a conventional (rectangular) room of an house;</li>
        <li>for <ks>boundary</ks>: the perimeter of the room, that is physically delimited by solid <ks>walls</ks>;</li>
        <li>for <ks>robot</ks>: a device able to execute move commands sent over the network, as described in the document
        <a href="https://htmlpreview.github.io/?https://github.com/anatali/issLab2021/blob/master/it.unibo.virtualRobot2020/userDocs/VirtualRobot2021.html" target="web"><em>VirtualRobot2021.html</em></a> provided by the customer; 
        </li><li>for <ks>walk</ks>: the  robot moves forward, close to the room walls. </li>
        <li>for <ks>robot-moves history</ks>: a visual rappresentation of the moves made by the robot during the execution of the application.</li>
        <li>for <ks>journey</ks>: the path along the perimeter of the room.</li>

        The customer does not impose any requirement on the programming language used to develop the application.
        
    </ul>  

    <h4>Test plans</h4>
    <table style="width:98%">
        <tbody>	
        <tr>
        <td style="width:50%">
        The test must verify that the path of the robot is equal to the one expected.  
        </td>
        <td><div class="remark">
        The verification of the equality must be authonomous and by software.
        </div>
        </td>
        </tr>
         </tbody>
        </table>
    </div>
    
    <h2>Problem analysis</h2>
    We highlight that:
    <ol>
        <li>In the <a href="https://htmlpreview.github.io/?https://github.com/anatali/issLab2021/blob/master/it.unibo.virtualRobot2020/userDocs/VirtualRobot2021.html#commands" target="web">VirtualRobot2021.html: commands</a> the customer states
        that the robot can receive move commands in two different ways:
            <ul>
            <li>by sending messages to the port <tt>8090</tt> using  <ks>HTTP POST</ks> </li>
            <li>by sending messages to the port <tt>8091</tt> using a <ks>websocket</ks> </li>
            </ul>
        </li>
         
        <li> With respect to the technological level, there are many libraries in many programming languages that support the
        required protcols. 
        <div class="remark">
        However, the problem does introduce an <k>abstraction gap at the conceptual level</k>,
        since <kc>the required logical interaction</kc> is always a <em>request-response</em>, <b>regardless of the technology</b> used to implement
        the interaction with the robot.
        </div>
        </li>
         
    </ol>
    
    The following resources could be usefully exploited to reduce the development time of a first prototype of the application:
    
    <ol>
    <li>The  <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/consolegui/Consolegui.java" target="code">Consolegui.java</a>  
    (in project <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/consolegui" target="code">it.unibo.virtualrobotclient</a>) </li>
    
    <li>The  <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/wenv/RobotMovesInfo.java" target="code">RobotMovesInfo.java</a>  
    (in project <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/wenv" target="code">it.unibo.virtualrobotclient</a>) </li>
    
    
    <li>The  <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/wenv/RobotInputController.java" target="code">RobotInputController.java</a>  
    (in project <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/wenv" target="code">it.unibo.virtualrobotclient</a>) </li>
  
    <li>The <a href="../app/src/main/kotlin/mapRoomKotlin/mapUtil.kt" target="code">mapUtil.kt</a>, utility to create and handle a map written in Kotlin.</li>
    </ol>
    
    <h3>Logical architecture</h3>
    Caption:<br><br>
    <img src="C:\Users\utente\Desktop\GabrielliManuel\iss2021_resumablebw\userDocs\img\architettura-logica-legenda.jpg" alt="legenda" width="25%">

    <br><br><br>

    <table style="width:98%">
        <tbody>	
        <tr>
        <td style="width:60%">
        We must design and build a <k>distributed system</k> with two software macro-components:
            <ol>
            <li>the <a href="https://htmlpreview.github.io/?https://github.com/anatali/issLab2021/blob/master/it.unibo.virtualRobot2020/userDocs/VirtualRobot2021.html" target="web"><ks>VirtualRobot</ks></a>, given by the customer</li>
            <li>our <ks>application</ks> that interacts with the robot with a <i>request-response</i> pattern</li>
            </ol>
        A first scheme of the logical architecture  of the systems can be defined as shown in the figure.
        
        </td>
        <td>  <center><img src="C:\Users\utente\Desktop\GabrielliManuel\iss2021_resumablebw\userDocs\img\architettura-logica.jpg" alt="logicArch0" width="100%"></center>
        </td>
        </tr>
        </tbody>

        
    </table>
    
    <br>
        This is what the robot has to do the meet the requirements:
        <pre>
let us define <kc>emum direction {UP,DOWN,LEFT,RIGHT}</kc>
the robot start in the HOME position, direction=DOWN
for 4 times: 
    1) send to the robot the request to execute the command <kc>moveForward</kc> 
    and continue to do it, until the answer of the request becomes 'false'
    2) send to the robot the request to execute the <kc>turnLeft</kc>
        </pre>
    
    <h3>Robot-Moves History</h3>
    The business logic is able to build two different types of robot-moves history:
    <ul>
        <li>a string that represents the robot path expressed as a sequence of moves. For example:
        <pre>wwwlwwwlwwwlwwwl</pre>  </li>
        <li>the places that the robot has explored, represented within a map of the room. For example
        
        <pre>
|r, 1, 1, 1, 1, 
|1, 0, 0, 0, 1, 
|1, 0, 0, 0, 1, 
|1, 1, 1, 1, 1, 
        </pre>
        
         In this representation, we suppose that:
        
        <ol>
        <li><bc>r</bc> means: cell occupied by the robot</li>
        <li><bc>0</bc> means: cell not explored</li>
        <li><bc>1</bc> means: cell explored</li>
        <li><bc>X</bc> means: cell occupied by an obstacle</li>
        </ol>
        </li>
    </ul>


    <h3>Development time</h3>
    The expected time required for the development of the application is (no more than) 6 hours.
    
    <h2>Test plans</h2> 
    To check that the application fulfills the requirements, we could keep track of the moves done by the robot.
    <pre>...
let us define <kc>moves[n][n];</kc>
client clicks on <ks>"RESUME"</ks> button.
for 4 times: 
    1) send to the robot the request to execute the command <kc>moveForward</kc>;
    if the answer is 'true' <ks>insert the symbol "r"</ks> in <kc>moves</kc> matrix in the position occupied by the robot and  <ks>insert the symbol "1"</ks> in the cell it left then continue to do 1); 
    2) when the answer of the request becomes 'false',
    send to the robot the request to execute the command <kc>turnLeft</kc>
At the end <ks>insert the symbol "0"</ks> in the cells not visited by the robot to fullfill the matrix.
    </pre>

    The strategy consists in setting the moving time for w and s in order to make the robot move in robot-units, which are steps. Then the robot sends a message each time it moves. These messages are used to build a map of the area. In this way we are able to know where the robot is at each step. 
    At the end we simply compare the path that the robot has made with the expected one.
   
    
    <h2>Project</h2> 
    The software system is focused on asynchronous interaction between the application and the Robot. This leads to the preference of WebSocket use. 
    In fact the websocket protocol provides a standardized way for the server to send content to the client without being first requested by the client, and allowing messages to be passed back and forth while keeping the connection open.
    In this way, a two-way ongoing conversation can take place between the client and the server.
    
    <h3>Nature of the application component</h3>
    <table>
        <tr>
            <td style= "width:50%">
                The application is a conventional Java program, represented in the figure as an object with internal threads.
            </td>
            <td style= "width:50%">
                <center><img src="C:\Users\utente\Desktop\GabrielliManuel\iss2021_resumablebw\userDocs\img\projectArch.png" alt="projectArch0" width="60%"></center>
            </td>
        </tr>
    </table>

    <h3>A layered architecture</h3>
    <table style="width:100%">
        <tbody>	
        <tr>
        <td style="width:50%">
            There are two ways of communication between the two macro-components, but the code must be as much indipendent as possible from the chosen one. This problem can be solved 
            with a <ks>layered structure</ks>. For exemple, the pattern Facade can be used to hide the complexities of the larger system and provide a simpler interface shared by the two ways of communication.
            This interface can be structured with four basic methods, which are common to both <ks>HTTP</ks> and <ks>Websocket</ks> protocols.
            This methods can be:
            <pre>        
public interface IssOperations {
    void forward( String msg ) ;
    void request( String msg );
    void reply( String msg );
    String requestSynch( String msg );
}
            </pre>
            <br>
            The method <ks class="italic">forward</ks> sends a message without waiting for the reply. On the contrary the method <ks class="italic">request</ks> waits for the answer sent by the method <ks class="italic">reply</ks>.
            Instead, the method <ks class="italic">requestSynch</ks> is introduced to facilitate the transition from procedure-call tomessage-passing.
    
            <br><br>
            <h3>Observable supports</h3>
            In order to exploit in a structured way the asynchronicity of the interaction, the reference design pattern is the <k>Observer pattern</k>.
            This pattern introduces an interface <ks>issObserver</ks> that defines a method that accepts two type of arguments:
            <pre>
public interface IssObserver {
    public void handleInfo(String info);
    public void handleInfo(JSONObject info);
}
            </pre>
            This method handle the info releated to the movement of the robot.
            <br>
            This observable supports must implement an interface that adds new operations to the high-level communication interface:
            <pre>
public interface <ks>IssCommSupport</ks> <k>extends <a href="../app/src/main/java/it/unibo/interaction/IssOperations.java" target="code"><ks>IssOperations</ks></a></k> {
    void registerObserver( IssObserver obs );
    void removeObserver( IssObserver obs );
    void close();
}
            </pre>
            This interface manages the observers.
            <br><br>
            The figure shows an exemple of communication layer with observable support.
        <br>
        </td>
        <td>  
        <center><img src="C:\Users\utente\Desktop\GabrielliManuel\iss2021_resumablebw\userDocs\img\issCommsLayers.png" alt="projectArch0" width="90%" class="imgMargin"></center>
        </td>
        </tr>
        </tbody>
    </table>

    <h3>Creation method</h3>

    A <ks>Factory</ks> can be used to create the chosen communication support. This pattern provides an interface to create an object, but lets the subclasses decide which object to instantiate.
    The Factory incorporates the creation of the necessary objects to handle the communication with the chosen protocol. This Factory must provide factory methods that return an object of type IssCommSupport.

    <h3>Business logic</h3> 
    <table style="width:100%">
        <tbody>	
        <tr>
        <td style="width:40%">
            The business logic is isolated and builds the map. It is defined in an onject of class <ks>RobotBoundaryLogic</ks>  that is called by the observer <ks>RobotInputController</ks> initialized to use the aril command-move language.
            <br>
            The details related to the construction of the robot-moves history are embedded in the class <ks>RobotMovesInfo</ks>.
            <br>
            <h3>Visual Interface</h3>
            The GUI has the control to start the application and suspend (and eventually restart). The <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/consolegui/Consolegui.java" target="code"><ks>ConsoleGui</ks></a> implements
            an Observer to send messages to <ks>RobotInputController</ks> when a button is clicked to start or stop the execution of the boundary. After the reception of a message from the ConsoleGui the RobotInputController changes the logic in 
            RobotBoundaryLogic.

            <br><br>
            The figure shows an exemple of application.
        </td>
        <td>  
        <center><img src="C:\Users\utente\Desktop\GabrielliManuel\iss2021_resumablebw\userDocs\img\businessLogic.png" alt="projectArch0" width="90%" class="imgMargin"></center>
        </td>
        </tr>
        </tbody>
    </table>


    <h2>Testing</h2> 
     
    
    <h2>Deployment</h2> 
    The deployment consists in the commit of the application on a project named <ks>iss2021_resumablebw</ks> of the MY GIT repository ( <k>RRR</k> ).
    <br><br>
    The final commit commit has done after <k>XXX</k> hours of work.
     
    <h2>Maintenance</h2> 
     
    <!-- USEFUL
    <table style="width:100%" border="1">
    <tr>
    <td style="width:50%">
    </td>
    <td></td>
    </tr>
    </table>
     QUESTIONS:
    chiarisce cosa il committente intende con 'Optionally'  
    chiarisce cosa il committente intende con 'should remember' 
    chiarisce cosa il committente intende con 'mental map'
    definisce la user story in modo da comprendere TUTTI i requisiti (anche opzionali)
    discute se sia meglio avvalersi di HTTP o delle websocket e perchè
    discute se sia meglio usare il linguaggio di comando cril, aril (o altro) e perchè
    discute se sia meglio muovere il robot in modo random o in modo organizzato 
    discute se il ritorno alla den debba/possa avvenire senza ricalcare il percorso effettuato
    presenta ogni TestPlan collegandolo ad una user story e in modo 'concreto' (non come un insieme di intenti)
    propone diverse tipologie di scene/situazioni per il testing
    individua e propone (motivandola) una lista di priorità per il soddisfacimento dei requisiti 
    presenta una stima dei tempi di realizzazione 
    presenta un elenco delle risorse che sarebbe opportuno avere e/o procurarsi
    presenta una architettura di progetto
    presenta dettagli di progetto che permettono una precisa implementazione da parte di chi legge
    pone in evidenza le parti di funzionamento proattivo e quelle di funzionamento reattivo
    ECCEDE nelle dimensioni del file (al momento > 1600Kb)
    
    
    -->
                  
    <br/><br/><br/><br/>	  

    <div style="background-color:rgba(86, 56, 253, 0.9); width:60%;text-align:left;color:white">
        By studentName email: manuel.gabrielli@studio.unibo.it <br>
        Github: <a href="https://github.com/ManuelGabrielli/GabrielliManuel" target="web" style="color: white;">https://github.com/ManuelGabrielli/GabrielliManuel</a>
        <img src="file:///C:/Users/utente/Desktop/Ingegneria%20dei%20Sistemi%20Software/io.jpg" alt="mbot" width="15%" height="15%">
    </div>  
    
    </body></html>